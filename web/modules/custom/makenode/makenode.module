<?php

use Drupal\Core\Field\FieldStorageDefinitionInterface;
use Drupal\Core\Field\BaseFieldDefinition;
use Drupal\field\Entity\FieldConfig;
use Drupal\field\Entity\FieldStorageConfig;

/**
 * Implements hook_install().
 */
function makenode_install() {
  // Define custom fields for the 'dataset' node type.
  makenode('node', 'dataset');
}

/**
 * Helper function to create custom fields.
 */
function makenode($entity_type, $bundle) {
  $fields = [
    'project_proponent' => 'Project Proponent',
    'project_name' => 'Project Name',
    'project_id' => 'Project ID',
    'method' => 'Method',
    'method_url' => 'Method URL',
    'method_type' => 'Method Type',
    'project_description' => 'Project Description',
    'date_project_registered' => 'Date Project Registered',
    'project_location' => 'Project location',
    'project_location_postcode' => 'Project location (postcode)',
    'project_area' => 'Project Area(s), where the project is an area based offsets project',
    'project_mapping_file_url' => 'Project Mapping File URL',
    'carbon_est_area_mapping_file_url' => 'Carbon Estimation Area mapping file URL',
    'carbon_est_area_sup_info' => 'Carbon Estimation Area Supplementary information',
    'regional_nrm_plan' => 'If the area-based project is covered by a regional natural resource management plan, is it consistent with that plan?',
    'joint_implementation_project' => 'Joint Implementation project',
    'carbon_maintenance_obligation' => 'Is the project area or project areas subject to a Carbon Maintenance Obligation (CMO)?',
    'conditional_reg_approvals' => 'Conditional upon all regulatory approvals being obtained',
    'conditional_rel_interest_holders' => 'Conditional upon the written consent of relevant interest holders',
    'permanence_period' => 'Nominated Permanence Period, if applicable',
    'permanence_period_finish_date' => 'Finish date of permanence period, if applicable',
    'contracted_on' => 'Contracted on',
    'contract_id' => 'Contract ID',
    'accus_total_units_issued' => 'ACCUs Total units issued',
    'kaccus_total_units_issued' => 'KACCUs Total units issued',
    'kaccus_units_2012_13' => 'KACCUs Units Issued in Financial Year 2012/13',
    'kaccus_units_2013_14' => 'KACCUs Units Issued in Financial Year 2013/14',
    'kaccus_units_2014_15' => 'KACCUs Units Issued in Financial Year 2014/15',
    'kaccus_units_2015_16' => 'KACCUs Units Issued in Financial Year 2015/16',
    'kaccus_units_2016_17' => 'KACCUs Units Issued in Financial Year 2016/17',
    'kaccus_units_2017_18' => 'KACCUs Units Issued in Financial Year 2017/18',
    'kaccus_units_2018_19' => 'KACCUs Units Issued in Financial Year 2018/19',
    'kaccus_units_2019_20' => 'KACCUs Units Issued in Financial Year 2019/20',
    'kaccus_units_2020_21' => 'KACCUs Units Issued in Financial Year 2020/21',
    'kaccus_units_2021_22' => 'KACCUs Units Issued in Financial Year 2021/22',
    'kaccus_units_2022_23' => 'KACCUs Units Issued in Financial Year 2022/23',
    'kaccus_units_2023_24' => 'KACCUs Units Issued in Financial Year 2023/24',
    'kaccus_units_issued_person' => 'Name of person/s to whom the KACCUs issued',
    'kaccus_units_relinquished' => 'Total Number of KACCUs units relinquished',
    'nkaccus_total_units_issued' => 'NKACCUs Total units issued',
    'nkaccus_units_2012_13' => 'NKACCUs Units Issued in Financial Year 2012/13',
    'nkaccus_units_2013_14' => 'NKACCUs Units Issued in Financial Year 2013/14',
    'nkaccus_units_2014_15' => 'NKACCUs Units Issued in Financial Year 2014/15',
    'nkaccus_units_2015_16' => 'NKACCUs Units Issued in Financial Year 2015/16',
    'nkaccus_units_2016_17' => 'NKACCUs Units Issued in Financial Year 2016/17',
    'nkaccus_units_2017_18' => 'NKACCUs Units Issued in Financial Year 2017/18',
    'nkaccus_units_2018_19' => 'NKACCUs Units Issued in Financial Year 2018/19',
    'nkaccus_units_2019_20' => 'NKACCUs Units Issued in Financial Year 2019/20',
    'nkaccus_units_2020_21' => 'NKACCUs Units Issued in Financial Year 2020/21',
    'nkaccus_units_2021_22' => 'NKACCUs Units Issued in Financial Year 2021/22',
    'nkaccus_units_2022_23' => 'NKACCUs Units Issued in Financial Year 2022/23',
    'nkaccus_units_2023_24' => 'NKACCUs Units Issued in Financial Year 2023/24',
    'nkaccus_units_issued_person' => 'Name of person/s to whom the NKACCUs issued',
    'nkaccus_units_relinquished' => 'Total Number of NKACCUs units relinquished',
    'notes' => 'Notes',
  ];

  foreach ($fields as $field_name => $label) {
    $field_storage = FieldStorageConfig::create([
      'field_name' => $field_name,
      'entity_type' => $entity_type,
      'type' => 'text_long',
      'settings' => [
        'max_length' => 0, // 0 for unlimited length.
        'is_ascii' => FALSE,
      ],
      'cardinality' => 1,
    ]);
    $field_storage->save();

    $field = FieldConfig::create([
      'field_name' => $field_name,
      'entity_type' => $entity_type,
      'bundle' => $bundle,
      'label' => $label,
      'settings' => [
        'display_summary' => FALSE,
      ],
      'field_storage' => $field_storage,
    ]);
    $field->save();
  }
}

