id: alex_csv_migrate_node
label: CSV Node Migration
migration_group: default
source:
  plugin: csv
  path: modules/custom/alex_csv_migrate/sources/mega.csv
  header_row_count: 1
  ids:
    - id
  fields:
    #this section links the header row columns to a name which can be used in the process section.
    0:
      name: id
      label: 'Project Proponent'
    1:
      name: project_name
      label: 'Project Name'
    2:
      name: project_id
      label: 'Project ID'
    3:
      name: method
      label: 'Method'
    4:
      name: method_url
      label: 'Method URL'
    5:
      name: method_type
      label: 'Method Type'
    6:
      name: project_description
      label: 'Project Description'
    7:
      name: date_project_registered
      label: 'Date Project Registered'
    8:
      name: project_location
      label: 'Project location'
    9:
      name: project_location_postcode
      label: 'Project location (postcode)'
    10:
      name: project_area
      label: 'Project Area(s), where the project is an area based offsets project'
    11:
      name: project_mapping_file_url
      label: 'Project Mapping File URL'
    12:
      name: carbon_est_area_mapping_file_url
      label: 'Carbon Estimation Area mapping file URL'
    13:
      name: carbon_est_area_sup_info
      label: 'Carbon Estimation Area Supplementary information'
    14:
      name: regional_nrm_plan
      label: 'If the area-based project is covered by a regional natural resource management plan, is it consistent with that plan?'
    15:
      name: joint_implementation_project
      label: 'Joint Implementation project'
    16:
      name: carbon_maintenance_obligation
      label: 'Is the project area or project areas subject to a Carbon Maintenance Obligation (CMO)?'
    17:
      name: conditional_reg_approvals
      label: 'Conditional upon all regulatory approvals being obtained'
    18:
      name: conditional_rel_interest_holders
      label: 'Conditional upon the written consent of relevant interest holders'
    19:
      name: permanence_period
      label: 'Nominated Permanence Period, if applicable'
    20:
      name: permanence_period_finish_date
      label: 'Finish date of permanence period, if applicable'
    21:
      name: contracted_on
      label: 'Contracted on'
    22:
      name: contract_id
      label: 'Contract ID'
    23:
      name: accus_total_units_issued
      label: 'ACCUs Total units issued'
    24:
      name: kaccus_total_units_issued
      label: 'KACCUs Total units issued'
    25:
      name: kaccus_units_2012_13
      label: 'KACCUs Units Issued in Financial Year 2012/13'
    26:
      name: kaccus_units_2013_14
      label: 'KACCUs Units Issued in Financial Year 2013/14'
    27:
      name: kaccus_units_2014_15
      label: 'KACCUs Units Issued in Financial Year 2014/15'
    28:
      name: kaccus_units_2015_16
      label: 'KACCUs Units Issued in Financial Year 2015/16'
    29:
      name: kaccus_units_2016_17
      label: 'KACCUs Units Issued in Financial Year 2016/17'
    30:
      name: kaccus_units_2017_18
      label: 'KACCUs Units Issued in Financial Year 2017/18'
    31:
      name: kaccus_units_2018_19
      label: 'KACCUs Units Issued in Financial Year 2018/19'
    32:
      name: kaccus_units_2019_20
      label: 'KACCUs Units Issued in Financial Year 2019/20'
    33:
      name: kaccus_units_2020_21
      label: 'KACCUs Units Issued in Financial Year 2020/21'
    34:
      name: kaccus_units_2021_22
      label: 'KACCUs Units Issued in Financial Year 2021/22'
    35:
      name: kaccus_units_2022_23
      label: 'KACCUs Units Issued in Financial Year 2022/23'
    36:
      name: kaccus_units_2023_24
      label: 'KACCUs Units Issued in Financial Year 2023/24'
    37:
      name: kaccus_units_issued_person
      label: 'Name of person/s to whom the KACCUs issued'
    38:
      name: kaccus_units_relinquished
      label: 'Total Number of KACCUs units relinquished'
    39:
      name: nkaccus_total_units_issued
      label: 'NKACCUs Total units issued'
    40:
      name: nkaccus_units_2012_13
      label: 'NKACCUs Units Issued in Financial Year 2012/13'
    41:
      name: nkaccus_units_2013_14
      label: 'NKACCUs Units Issued in Financial Year 2013/14'
    42:
      name: nkaccus_units_2014_15
      label: 'NKACCUs Units Issued in Financial Year 2014/15'
    43:
      name: nkaccus_units_2015_16
      label: 'NKACCUs Units Issued in Financial Year 2015/16'
    44:
      name: nkaccus_units_2016_17
      label: 'NKACCUs Units Issued in Financial Year 2016/17'
    45:
      name: nkaccus_units_2017_18
      label: 'NKACCUs Units Issued in Financial Year 2017/18'
    46:
      name: nkaccus_units_2018_19
      label: 'NKACCUs Units Issued in Financial Year 2018/19'
    47:
      name: nkaccus_units_2019_20
      label: 'NKACCUs Units Issued in Financial Year 2019/20'
    48:
      name: nkaccus_units_2020_21
      label: 'NKACCUs Units Issued in Financial Year 2020/21'
    49:
      name: nkaccus_units_2021_22
      label: 'NKACCUs Units Issued in Financial Year 2021/22'
    50:
      name: nkaccus_units_2022_23
      label: 'NKACCUs Units Issued in Financial Year 2022/23'
    51:
      name: nkaccus_units_2023_24
      label: 'NKACCUs Units Issued in Financial Year 2023/24'
    52:
      name: nkaccus_units_issued_person
      label: 'Name of person/s to whom the NKACCUs issued'
    53:
      name: nkaccus_units_relinquished
      label: 'Total Number of NKACCUs units relinquished'
    54:
      name: notes
      label: 'Notes'


process:
  #this section maps the header row columns to the destination fields within the destination node.
  #the plugin used is a process plugin, which can be found in 'web/modules/custom/alex_csv_migrate/src/Plugin/migrate/process/'
  #the plugin converts the encoding of the source data to UTF-8.
  type:
    plugin: default_value
    default_value: dataset
  title:
    plugin: sanitize_process
    source: id
  project_proponent:
    plugin: sanitize_process
    source: project_proponent
  project_name:
    plugin: sanitize_process
    source: project_name
  project_id:
    plugin: sanitize_process
    source: project_id
  method:
    plugin: sanitize_process
    source: method
  method_url:
    plugin: sanitize_process
    source: method_url
  project_description:
    plugin: sanitize_process
    source: project_description
  date_project_registered:
    plugin: sanitize_process
    source: date_project_registered
  project_location:
    plugin: sanitize_process
    source: project_location
  project_location_postcode:
    plugin: sanitize_process
    source: project_location_postcode
  project_area:
    plugin: sanitize_process
    source: project_area
  project_mapping_file_url:
    plugin: sanitize_process
    source: project_mapping_file_url
  carbon_est_area_mapping_file_url:
    plugin: sanitize_process
    source: carbon_est_area_mapping_file_url
  carbon_est_area_sup_info:
    plugin: sanitize_process
    source: carbon_est_area_sup_info
  regional_nrm_plan:
    plugin: sanitize_process
    source: regional_nrm_plan
  joint_implementation_project:
    plugin: sanitize_process
    source: joint_implementation_project
  carbon_maintenance_obligation:
    plugin: sanitize_process
    source: carbon_maintenance_obligation
  conditional_reg_approvals:
    plugin: sanitize_process
    source: conditional_reg_approvals
  conditional_rel_interest_holders:
    plugin: sanitize_process
    source: conditional_rel_interest_holders
  permanence_period:
    plugin: sanitize_process
    source: permanence_period
  permanence_period_finish_date:
    plugin: sanitize_process
    source: permanence_period_finish_date
  contracted_on:
    plugin: sanitize_process
    source: contracted_on
  contract_id:
    plugin: sanitize_process
    source: contract_id
  accus_total_units_issued:
    plugin: sanitize_process
    source: accus_total_units_issued
  kaccus_total_units_issued:
    plugin: sanitize_process
    source: kaccus_total_units_issued
  kaccus_units_2012_13:
    plugin: sanitize_process
    source: kaccus_units_2012_13
  kaccus_units_2013_14:
    plugin: sanitize_process
    source: kaccus_units_2013_14
  kaccus_units_2014_15:
    plugin: sanitize_process
    source: kaccus_units_2014_15
  kaccus_units_2015_16:
    plugin: sanitize_process
    source: kaccus_units_2015_16
  kaccus_units_2016_17:
    plugin: sanitize_process
    source: kaccus_units_2016_17
  kaccus_units_2017_18:
    plugin: sanitize_process
    source: kaccus_units_2017_18
  kaccus_units_2018_19:
    plugin: sanitize_process
    source: kaccus_units_2018_19
  kaccus_units_2019_20:
    plugin: sanitize_process
    source: kaccus_units_2019_20
  kaccus_units_2020_21:
    plugin: sanitize_process
    source: kaccus_units_2020_21
  kaccus_units_2021_22:
    plugin: sanitize_process
    source: kaccus_units_2021_22
  kaccus_units_2022_23:
    plugin: sanitize_process
    source: kaccus_units_2022_23
  kaccus_units_2023_24:
    plugin: sanitize_process
    source: kaccus_units_2023_24
  kaccus_units_issued_person:
    plugin: sanitize_process
    source: kaccus_units_issued_person
  kaccus_units_relinquished:
    plugin: sanitize_process
    source: kaccus_units_relinquished
  nkaccus_total_units_issued:
    plugin: sanitize_process
    source: nkaccus_total_units_issued
  nkaccus_units_2012_13:
    plugin: sanitize_process
    source: nkaccus_units_2012_13
  nkaccus_units_2013_14:
    plugin: sanitize_process
    source: nkaccus_units_2013_14
  nkaccus_units_2014_15:
    plugin: sanitize_process
    source: nkaccus_units_2014_15
  nkaccus_units_2015_16:
    plugin: sanitize_process
    source: nkaccus_units_2015_16
  nkaccus_units_2016_17:
    plugin: sanitize_process
    source: nkaccus_units_2016_17
  nkaccus_units_2017_18:
    plugin: sanitize_process
    source: nkaccus_units_2017_18
  nkaccus_units_2018_19:
    plugin: sanitize_process
    source: nkaccus_units_2018_19
  nkaccus_units_2019_20:
    plugin: sanitize_process
    source: nkaccus_units_2019_20
  nkaccus_units_2020_21:
    plugin: sanitize_process
    source: nkaccus_units_2020_21
  nkaccus_units_2021_22:
    plugin: sanitize_process
    source: nkaccus_units_2021_22
  nkaccus_units_2022_23:
    plugin: sanitize_process
    source: nkaccus_units_2022_23
  nkaccus_units_2023_24:
    plugin: sanitize_process
    source: nkaccus_units_2023_24
  nkaccus_units_issued_person:
    plugin: sanitize_process
    source: nkaccus_units_issued_person
  nkaccus_units_relinquished:
    plugin: sanitize_process
    source: nkaccus_units_relinquished
  notes:
    plugin: sanitize_process
    source: notes

destination:
  #this section defines the destination entity type and bundle.
  plugin: 'entity:node'
  default_bundle: dataset
